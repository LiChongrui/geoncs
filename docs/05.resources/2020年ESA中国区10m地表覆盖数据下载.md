
&emsp;&emsp;开始写博客这么久，但没多少文章，说来惭愧。

&emsp;&emsp;从本篇开始，内容会逐步涉及数据获取、处理等实际的过程。也会跟gma库

（详见[自建 | 地理与气象数据分析（geographic and meteorological data analysis）（gma）的说明与使用](https://blog.csdn.net/weixin_42155937/article/details/121023363)）中构建的一些函数进行联动和测试。

&emsp;&emsp;也感谢各位大佬的阅读和指导。

@[TOC](目录)
# 0 数据简介
&emsp;&emsp;欧洲航天局（ESA）**< ESA WorldCover 10 m 2020 >** 产品基于Sentinel-1和Sentinel-2数据提供了一种新的全球地表覆盖产品，分辨率为10米，时间为2020年。

&emsp;&emsp;该产品是在欧空局世界覆盖项目 < ESA WorldCover project >的框架内生成的，该项目是欧洲航天局第五个地球观测包络线计划（EOEP-5）的一部分。

&emsp;&emsp;该产品包括11个地表覆盖类别：分别为**林地，灌木，草地，耕地，建筑，裸地/稀疏植被区，雪和冰，开阔水域，草本湿地，红树林，苔藓**。

<center>表 0 < ESA WorldCover 10 m 2020 > 数据简介</center>
<table>
 </tr>
 <tr align="left">
	<td >值</td> 
	<td >色彩映射</td> 
	<td>地表覆盖类型</td>
 </tr>
 <tr align="left">
	<td >10</td> 
	<td bgcolor=#006400>#006400</td> 
	<td>林地</td>
 </tr>
 <tr align="left">
	<td >20</td> 
	<td bgcolor=#ffbb22>#ffbb22</td> 
	<td>灌木</td>
 </tr>
 <tr align="left">
	<td >30</td> 
	<td bgcolor=#ffff4c>#ffff4c</td> 
	<td>草地</td>
 </tr>
 <tr align="left">
	<td >40</td> 
	<td bgcolor=#f096ff>#f096ff</td> 
	<td>耕地</td>
 </tr>
 <tr align="left">
	<td >50</td> 
	<td bgcolor=#fa0000>#fa0000</td> 
	<td>建筑</td>
 </tr>
 <tr align="left">
	<td >60</td> 
	<td bgcolor=#b4b4b4>#b4b4b4</td> 
	<td>裸地/稀疏植被区</td>
 </tr>
 <tr align="left">
	<td >70</td> 
	<td bgcolor=#f0f0f0>#f0f0f0</td> 
	<td>雪和冰</td>
 </tr>
 <tr align="left">
	<td >80</td> 
	<td bgcolor=#0064c8>#0064c8</td> 
	<td>开阔水域</td>
 </tr>
<tr align="left">
	<td >90</td> 
	<td bgcolor=#0096a0>#0096a0</td> 
	<td>草本湿地</td>
 </tr>
<tr align="left">
	<td >95</td> 
	<td bgcolor=#00cf75>#00cf75</td> 
	<td>红树林</td>
 </tr>
<tr align="left">
	<td >100</td> 
	<td bgcolor=#fae6a0>#fae6a0</td> 
	<td>苔藓</td>
 </tr>
</table>

# 1 从ESA官网下载
&emsp;&emsp;ESA土地利用数据官网为：
> [https://esa-worldcover.org/en](https://esa-worldcover.org/en)

&emsp;&emsp;下载步骤（顺序如图中序号）：

&emsp;&emsp;0.注册一个ESA账号（当然这是必须的），登录并进入数据下载页面。

&emsp;&emsp;1.选择 **‘DOWNLOAD’**。

&emsp;&emsp;2.Extend 选择 **Administrative borders** 。

&emsp;&emsp;3.Borders选择 **Countries** 。
![在这里插入图片描述](https://img-blog.csdnimg.cn/7b84f8c397ee46508910f056a55e643e.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5rSb55qE5Zyw55CG56CU5a2m,size_20,color_FFFFFF,t_70,g_se,x_16)&emsp;&emsp;4.双击中国区域，可获得中国区的范围和产品。

&emsp;&emsp;5.选择全部或部分需要的数据，点击**NEXT**。
![在这里插入图片描述](https://img-blog.csdnimg.cn/a196333344d1456daacf0e345dd553bd.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5rSb55qE5Zyw55CG56CU5a2m,size_20,color_FFFFFF,t_70,g_se,x_16)
&emsp;&emsp;也可以查看选择数据的区域（如下图）：
![在这里插入图片描述](https://img-blog.csdnimg.cn/1f5c969d123847a0b796053e995a7849.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5rSb55qE5Zyw55CG56CU5a2m,size_20,color_FFFFFF,t_70,g_se,x_16)

&emsp;&emsp;6.选择质量控制数据和土地利用数据，点击**DOWNLOAD**，待处理完成后即可下载。![在这里插入图片描述](https://img-blog.csdnimg.cn/84b385b9c50b4beb93de7bc862dfaaa2.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5rSb55qE5Zyw55CG56CU5a2m,size_20,color_FFFFFF,t_70,g_se,x_16)
# 2 利用GEE下载
## 2.1 GEE简介
> &emsp;&emsp;谷歌地球云计算平台（Google Earth Engine，GEE）是Gorelick等人（2017）在谷歌公司、卡内基梅隆大学和美国地质调查局联合开发的世界上最先进的基于云计算的地理空间分析平台。该平台拥有Landsat、Sentinel、MODIS等系列卫星的各级数据及数据产品，能快速获取并处理不同级别的图像产品以供直接使用，并且其高性能计算和并行处理可用于处理大型地理空间数据集。通过调用GEE平台海量数据资源，可以快速计算NDVI、NDWI、NDBI等各种指数，能进行地物分类、植被覆盖、作物产量预测等等。

> &emsp;&emsp;GEE托管目前大部分卫星图像，并将其存储在公共数据云存档中。其中包括可追溯40多年的历史地球图像，并且每天摄取的图像几乎无延时更新。基于海量数据集，还提供API和其他工具，以支持大型数据集的空间分析。

> &emsp;&emsp;GEE包含的数据集超过 200 个公共的数据集，超过2000万张影像，每天的数据量增加大约10000张影像，容量超过30PB。GEE有一个可搜索的数据目录（https://developers.google.com/earth-engine/datasets/），包括整个EROS（USGS NASA）Landsat目录，大量的MODIS数据集，Sentinel-1数据，NAIP数据，降水量数据，海面温度数据，CHIRPS气候数据、海拔数据、夜间灯光数据以及人口经济数据等等。

## 2.2 GEE下载代码
&emsp;&emsp;GEE以完成对 **< ESA WorldCover 10 m 2020 >** 数据的收录，可直接在GEE中下载。下载代码及代码说明如下。

```javascript
//引入数据集
var China = ee.FeatureCollection("users/lichongrui321/VTD_PG_Province_China"),
    ESA_WC = ee.ImageCollection("ESA/WorldCover/v100");
    
//边界和显示配置
Map.centerObject(China, 4);
var empty = ee.Image().toByte();
var outline = empty.paint({featureCollection:China,
                          color:0, //颜色透明
                          width:3  //边界宽度
                          });
Map.addLayer(outline, {palette: "ff0000"}, "China");

//ESA_WC数据集配置
var dataset = ESA_WC.first().clip(China);
var visualization = {bands: ['Map']};
Map.addLayer(dataset, visualization, "WorldCover");

//导出数据到网盘
Export.image.toDrive({
    		image:dataset,
    		description: "ESA_WC_China",
    		folder:'ESA',
    		region:China,
    		scale:10,
    		crs:'EPSG:4326',
    		maxPixels:1e13
			});
```
&emsp;&emsp;GEE处理后的地表覆盖。

![在这里插入图片描述](https://img-blog.csdnimg.cn/dc9525e31781494b970afe0bd135baf8.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5rSb55qE5Zyw55CG56CU5a2m,size_20,color_FFFFFF,t_70,g_se,x_16)

&emsp;&emsp;任务结束后，点击**RUN**，简单设置后数据会导出至Google网盘，之后可在Google网盘中下载数据。

![在这里插入图片描述](https://img-blog.csdnimg.cn/2a4b10d528ff476db2081c282770cd56.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5rSb55qE5Zyw55CG56CU5a2m,size_20,color_FFFFFF,t_70,g_se,x_16)&emsp;&emsp;任务结束后，点击**RUN**，简单设置后数据会导出至Google网盘，之后可在Google网盘中下载数据。


# 3 下载数据示例
&emsp;&emsp; 以下为从ESA官网下载的 ESA_WorldCover_10m_2020_v100_N33E111_Map 产品示例图，主要区域为河南省洛阳市。
![在这里插入图片描述](https://img-blog.csdnimg.cn/21120c28af1544a094e278afb2c4e0fb.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5rSb55qE5Zyw55CG56CU5a2m,size_20,color_FFFFFF,t_70,g_se,x_16)&emsp;&emsp; 从ESA官网下载的数据类型为 .tif 文件，数据类型为 8位无符号整型，且具有色彩映射表，色彩与值（地表覆盖类型）的对应关系见 表 0。
